

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Amazon Prime Video ‚Äî Interactive ERD (Scrollable)</title>
<style>
  :root{
    --bg:#07101a;
    --panel:#0f1724;
    --accent:#1e40af;
    --accent-2:#60a5fa;
    --muted:#94a3b8;
    --card:#0b1220;
    --text:#e6eef8;
  }
  html,body{
    height:100%;
    margin:0;
    background:var(--bg);
    font-family:Inter,Segoe UI,Roboto,Helvetica,Arial;
    color:var(--text);
    overflow:auto; /* Added scrollbars */
  }
  .stage-wrap{
    width:1800px;
    height:1200px;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:visible;
    padding:20px;
    box-sizing:border-box;
  }
  .stage{
    width:1600px;
    height:900px;
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    border-radius:12px;
    position:relative;
    overflow:visible;
    border:1px solid rgba(255,255,255,0.03);
    transform-origin:center center;
    box-shadow:0 20px 60px rgba(2,6,23,0.6);
  }
  svg#links{
    position:absolute;
    left:0;
    top:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:4;
  }
  marker.arrow path{fill:var(--accent-2);}
  .entity{
    position:absolute;
    min-width:220px;
    max-width:270px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.06);
    box-shadow:0 8px 30px rgba(2,6,23,0.6);
    z-index:6;
    padding:10px;
    cursor:pointer;
    transition:transform .18s ease, box-shadow .18s ease;
  }
  .entity:hover{transform:scale(1.1);box-shadow:0 18px 60px rgba(37,99,235,0.25);}
  .entity .head{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px;border-radius:8px;}
  .entity .name{font-weight:700;color:var(--accent-2);font-size:17px;}
  .entity .pill{font-size:13px;color:var(--muted);background:rgba(255,255,255,0.03);padding:4px 8px;border-radius:8px;}
  .entity ul{list-style:none;margin:0;padding:6px 8px;font-size:14.5px;color:#dbeafe;}
  .entity li{padding:5px 4px;border-radius:6px;display:flex;justify-content:space-between;gap:8px;}
  .entity li .colname{font-weight:600;}
  .entity li .coltype{color:var(--muted);font-size:13px;}
  .link{stroke:rgba(96,165,250,0.9);stroke-width:2.2;fill:none;opacity:0.9;}
  .card-label{font-size:12px;fill:#cce6ff;stroke:rgba(0,0,0,0.25);paint-order:stroke;}
  .card-back{fill:rgba(2,6,23,0.6);stroke:rgba(255,255,255,0.03);rx:6;ry:6;}
  .legend{position:absolute;right:10px;bottom:10px;z-index:90;background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);font-size:12px;color:var(--muted);}
  .legend b{color:var(--accent-2);}
</style>
</head>
<body>
<div class="stage-wrap">
<div class="stage" id="stage">
  <svg id="links" xmlns="http://www.w3.org/2000/svg"><defs><marker id="arrow" markerWidth="10" markerHeight="8" refX="8" refY="4" orient="auto"><path d="M0,0 L8,4 L0,8 z" fill="#60a5fa"/></marker></defs></svg>

  <div class="entity" id="users" style="left: 490px; top: 20px;">
    <div class="head"><div class="name">Users</div><div class="pill">PK user_id</div></div>
    <ul><li><span class="colname">user_id</span><span class="coltype">PK</span></li><li><span class="colname">name</span><span class="coltype">varchar</span></li><li><span class="colname">email</span><span class="coltype">varchar</span></li><li><span class="colname">country</span><span class="coltype">varchar</span></li><li><span class="colname">subscription_status</span><span class="coltype">varchar</span></li><li><span class="colname">registration_date</span><span class="coltype">date</span></li></ul>
  </div>

  <div class="entity" id="profiles" style="left: 250px; top: 190px;">
    <div class="head"><div class="name">Profiles</div><div class="pill">PK profile_id</div></div>
    <ul><li><span class="colname">profile_id</span><span class="coltype">PK</span></li><li><span class="colname">user_id</span><span class="coltype">FK ‚Üí users</span></li><li><span class="colname">profile_name</span><span class="coltype">varchar</span></li><li><span class="colname">age_group</span><span class="coltype">varchar</span></li><li><span class="colname">language_preference</span><span class="coltype">varchar</span></li></ul>
  </div>

  <div class="entity" id="transactions" style="left: 750px; top: 190px;">
    <div class="head"><div class="name">Transactions</div><div class="pill">PK transaction_id</div></div>
    <ul><li><span class="colname">transaction_id</span><span class="coltype">PK</span></li><li><span class="colname">user_id</span><span class="coltype">FK ‚Üí users</span></li><li><span class="colname">transaction_type</span><span class="coltype">varchar</span></li><li><span class="colname">amount</span><span class="coltype">numeric</span></li><li><span class="colname">transaction_date</span><span class="coltype">date</span></li></ul>
  </div>

  <div class="entity" id="viewinghistory" style="left: 100px; top: 380px;">
    <div class="head"><div class="name">ViewingHistory</div><div class="pill">PK history_id</div></div>
    <ul><li><span class="colname">history_id</span><span class="coltype">PK</span></li><li><span class="colname">profile_id</span><span class="coltype">FK ‚Üí profiles</span></li><li><span class="colname">content_id</span><span class="coltype">FK ‚Üí content</span></li><li><span class="colname">watch_date</span><span class="coltype">date</span></li><li><span class="colname">progress</span><span class="coltype">varchar</span></li></ul>
  </div>

  <div class="entity" id="watchlist" style="left: 450px; top: 380px;">
    <div class="head"><div class="name">Watchlist</div><div class="pill">PK watchlist_id</div></div>
    <ul><li><span class="colname">watchlist_id</span><span class="coltype">PK</span></li><li><span class="colname">profile_id</span><span class="coltype">FK ‚Üí profiles</span></li><li><span class="colname">content_id</span><span class="coltype">FK ‚Üí content</span></li><li><span class="colname">date_added</span><span class="coltype">date</span></li></ul>
  </div>

  <div class="entity" id="recommendations" style="left: 800px; top: 380px;">
    <div class="head"><div class="name">Recommendations</div><div class="pill">PK recommendation_id</div></div>
    <ul><li><span class="colname">recommendation_id</span><span class="coltype">PK</span></li><li><span class="colname">profile_id</span><span class="coltype">FK ‚Üí profiles</span></li><li><span class="colname">content_id</span><span class="coltype">FK ‚Üí content</span></li><li><span class="colname">recommendation_date</span><span class="coltype">date</span></li><li><span class="colname">reason</span><span class="coltype">text</span></li></ul>
  </div>

  <div class="entity" id="content" style="left: 450px; top: 570px;">
    <div class="head"><div class="name">Content</div><div class="pill">PK content_id</div></div>
    <ul><li><span class="colname">content_id</span><span class="coltype">PK</span></li><li><span class="colname">title</span><span class="coltype">varchar</span></li><li><span class="colname">genre</span><span class="coltype">varchar</span></li><li><span class="colname">release_year</span><span class="coltype">integer</span></li><li><span class="colname">rating</span><span class="coltype">numeric</span></li><li><span class="colname">content_type</span><span class="coltype">varchar</span></li></ul>
  </div>

  <div class="legend"><b>Legend</b><br>üîπ Entity<br>‚û°Ô∏è Relationship<br>1 : N Cardinality</div>
</div>
</div>

<script>
const relations=[
  {from:'users',to:'profiles',label:'1 : N'},
  {from:'users',to:'transactions',label:'1 : N'},
  {from:'profiles',to:'viewinghistory',label:'1 : N'},
  {from:'profiles',to:'watchlist',label:'1 : N'},
  {from:'profiles',to:'recommendations',label:'1 : N'},
  {from:'content',to:'viewinghistory',label:'1 : N'},
  {from:'content',to:'watchlist',label:'1 : N'},
  {from:'content',to:'recommendations',label:'1 : N'}
];
const svg=document.getElementById('links');
const stage=document.getElementById('stage');

function getEdgePoint(el,target){
  const r=el.getBoundingClientRect();
  const s=stage.getBoundingClientRect();
  const center={x:r.left-s.left+r.width/2,y:r.top-s.top+r.height/2};
  const tRect=target.getBoundingClientRect();
  const tCenter={x:tRect.left-s.left+tRect.width/2,y:tRect.top-s.top+tRect.height/2};
  const dx=tCenter.x-center.x,dy=tCenter.y-center.y;
  const angle=Math.atan2(dy,dx);
  const px=center.x+Math.cos(angle)*r.width/2.3;
  const py=center.y+Math.sin(angle)*r.height/2.3;
  return{x:px,y:py};
}

function drawLinks(){
  svg.innerHTML='<defs><marker id="arrow" markerWidth="10" markerHeight="8" refX="8" refY="4" orient="auto"><path d="M0,0 L8,4 L0,8 z" fill="#60a5fa"/></marker></defs>';
  relations.forEach((rel)=>{
    const from=document.getElementById(rel.from);
    const to=document.getElementById(rel.to);
    const p1=getEdgePoint(from,to);
    const p2=getEdgePoint(to,from);
    const line=document.createElementNS("http://www.w3.org/2000/svg","line");
    line.setAttribute('x1',p1.x);line.setAttribute('y1',p1.y);
    line.setAttribute('x2',p2.x);line.setAttribute('y2',p2.y);
    line.setAttribute('class','link');line.setAttribute('marker-end','url(#arrow)');
    svg.appendChild(line);
    const midx=(p1.x+p2.x)/2,midy=(p1.y+p2.y)/2;
    const rect=document.createElementNS("http://www.w3.org/2000/svg","rect");
    rect.setAttribute('x',midx-20);rect.setAttribute('y',midy-14);
    rect.setAttribute('width',40);rect.setAttribute('height',14);
    rect.setAttribute('class','card-back');
    const text=document.createElementNS("http://www.w3.org/2000/svg","text");
    text.setAttribute('x',midx);text.setAttribute('y',midy-3);
    text.setAttribute('class','card-label');text.setAttribute('text-anchor','middle');
    text.textContent=rel.label;
    svg.appendChild(rect);svg.appendChild(text);
  });
}

window.addEventListener('load',()=>{
  drawLinks();
  window.addEventListener('resize',drawLinks);
});
</script>
</body>
</html>
